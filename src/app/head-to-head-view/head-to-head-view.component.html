<div *ngIf="scoreboard && scoreboard.matches.length > 0">


    <div class="row justify-content-center">
        <div class="col-auto">

            <div class="row justify-content-center">
                <div class="col">
                    <app-page-header title="{{'stats.headToHead' | translate}}">
                    </app-page-header>
                </div>

                <div class="w-100"></div>

                <!-- CHART FOR MATCHES HISTORY -->
                <div class="col-auto">
                    <app-head-to-head-chart [rows]="scoreboard.chartRows">
                    </app-head-to-head-chart>
                </div>
            </div>

        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-auto">

            <!-- HEADER -->
            <div class="row justify-content-center mb-3">
                <div class="col text-center">
                    <mat-icon *ngIf="scoreboard.winner.matchesWon > scoreboard.looser.matchesWon"
                              class="large-icon plus-column my-4 mx-1"
                              svgIcon="lenny-happy">
                    </mat-icon>
                    <mat-icon *ngIf="scoreboard.winner.matchesWon === scoreboard.looser.matchesWon"
                              class="large-icon plus-column my-4 mx-1"
                              svgIcon="lenny-neutral-left">
                    </mat-icon>
                    <div class="display-5 text-nowrap mx-1">
                        {{scoreboard.winner.player.username}}
                    </div>
                </div>
                <div class="col text-center">
                    <mat-icon *ngIf="scoreboard.winner.matchesWon > scoreboard.looser.matchesWon"
                              class="large-icon minus-column my-4 mx-1"
                              svgIcon="lenny-sad">
                    </mat-icon>
                    <mat-icon *ngIf="scoreboard.winner.matchesWon === scoreboard.looser.matchesWon"
                              class="large-icon plus-column my-4 mx-1"
                              svgIcon="lenny-neutral-right">
                    </mat-icon>
                    <div class="display-5 text-nowrap mx-1">
                        {{scoreboard.looser.player.username}}
                    </div>
                </div>
            </div>

            <!-- MATCHES -->
            <div class="row justify-content-center align-items-center mt-3 mb-1">
                <div class="col">
                    <div [countUp]='scoreboard.winner.matchesWon'
                         [options]="{separator: ' '}"
                         class="header-large plus-column text-start">
                        0
                    </div>
                </div>
                <div class="col text-center">
                    <div [countUp]='scoreboard.numberOfMatches'
                         [options]="{separator: ' ', prefix: '(', suffix: ')'}"
                         class="text-center">
                        0
                    </div>
                    <div class="header-small mb-1">
                        {{'match.plural' | translate}}
                    </div>
                    <div class="text-nowrap">
                        {{scoreboard.winner.matchesRatio | number: "1.1-1"}}
                        %
                        {{scoreboard.looser.matchesRatio | number: "1.1-1"}}
                    </div>
                </div>
                <div class="col">
                    <div [countUp]='scoreboard.looser.matchesWon'
                         [options]="{separator: ' '}"
                         class="header-large plus-column text-end">
                        0
                    </div>
                </div>
            </div>

            <!-- 2-set MATCH -->
            <div class="row justify-content-center align-items-center"
                 [ngClass]="scoreboard.numberOfTiebreaks > 0 ? 'my-1' : 'mt-1 mb-3'">
                <div class="col">
                    <div [countUp]='scoreboard.winner.regularMatchesWon'
                         [options]="{separator: ' '}"
                         class="header-small plus-column text-end">
                        0
                    </div>
                </div>
                <div class="col text-center">
                    <div>
                        {{'match.2set' | translate}}
                    </div>
                    <div class="text-nowrap">
                        {{scoreboard.winner.regularMatchesRatio | number: "1.1-1"}}
                        %
                        {{scoreboard.looser.regularMatchesRatio | number: "1.1-1"}}
                    </div>
                </div>
                <div class="col">
                    <div [countUp]='scoreboard.looser.regularMatchesWon'
                         [options]="{separator: ' '}"
                         class="header-small plus-column text-start">
                        0
                    </div>
                </div>
            </div>

            <!-- 3-set MATCH -->
            <div *ngIf="scoreboard.numberOfTiebreaks > 0"
                 class="row justify-content-center align-items-center mt-1 mb-3">
                <div class="col">
                    <div [countUp]='scoreboard.winner.tieBreakMatchesWon'
                         [options]="{separator: ' '}"
                         class="header-small plus-column text-end">
                        0
                    </div>
                </div>
                <div class="col text-center">
                    <div>
                        {{'match.3set' | translate}}
                    </div>
                    <div class="text-nowrap">
                        {{scoreboard.winner.tieBreakMatchesRatio | number: "1.1-1"}}
                        %
                        {{scoreboard.looser.tieBreakMatchesRatio | number: "1.1-1"}}
                    </div>
                </div>
                <div class="col">
                    <div [countUp]='scoreboard.looser.tieBreakMatchesWon'
                         [options]="{separator: ' '}"
                         class="header-small plus-column text-start">
                        0
                    </div>
                </div>
            </div>
            <mat-divider></mat-divider>











            <!-- SETS -->
            <div class="row justify-content-center align-items-center mt-3 mb-1">
                <div class="col">
                    <div [countUp]='scoreboard.winner.setsWon'
                         [options]="{separator: ' '}"
                         class="header-large plus-column text-start">
                        0
                    </div>
                </div>
                <div class="col text-center">
                    <div [countUp]='scoreboard.winner.setsWon + scoreboard.looser.setsWon'
                         [options]="{separator: ' ', prefix: '(', suffix: ')'}"
                         class="text-center">
                        0
                    </div>
                    <div class="header-small mb-1">
                        {{'set.plural' | translate}}
                    </div>
                    <div class="text-nowrap">
                        {{scoreboard.winner.setsRatio | number: "1.1-1"}}
                        %
                        {{scoreboard.looser.setsRatio | number: "1.1-1"}}
                    </div>
                </div>
                <div class="col">
                    <div [countUp]='scoreboard.looser.setsWon'
                         [options]="{separator: ' '}"
                         class="header-large plus-column text-end">
                        0
                    </div>
                </div>
            </div>

            <!-- 1ST SETS -->
            <div class="row justify-content-center align-items-center my-1">
                <div class="col">
                    <div [countUp]='scoreboard.winner.firstSetsWon'
                         [options]="{separator: ' '}"
                         class="header-small plus-column text-end">
                        0
                    </div>
                </div>
                <div class="col text-center">
                    <div>
                        {{'set.first' | translate}}
                    </div>
                    <div class="text-nowrap">
                        {{scoreboard.winner.firstSetsRatio | number: "1.1-1"}}
                        %
                        {{scoreboard.looser.firstSetsRatio | number: "1.1-1"}}
                    </div>
                </div>
                <div class="col">
                    <div [countUp]='scoreboard.looser.firstSetsWon'
                         [options]="{separator: ' '}"
                         class="header-small plus-column text-start">
                        0
                    </div>
                </div>
            </div>

            <!-- 2ND SETS -->
            <div class="row justify-content-center align-items-center"
                 [ngClass]="scoreboard.numberOfTiebreaks > 0 ? 'my-1' : 'mt-1 mb-3'">
                <div class="col">
                    <div [countUp]='scoreboard.winner.secondSetsWon'
                         [options]="{separator: ' '}"
                         class="header-small plus-column text-end">
                        0
                    </div>
                </div>
                <div class="col text-center">
                    <div>
                        {{'set.second' | translate}}
                    </div>
                    <div class="text-nowrap">
                        {{scoreboard.winner.secondSetsRatio | number: "1.1-1"}}
                        %
                        {{scoreboard.looser.secondSetsRatio | number: "1.1-1"}}
                    </div>
                </div>
                <div class="col">
                    <div [countUp]='scoreboard.looser.secondSetsWon'
                         [options]="{separator: ' '}"
                         class="header-small plus-column text-start">
                        0
                    </div>
                </div>
            </div>

            <!-- 3RD SETS -->
            <div *ngIf="scoreboard.numberOfTiebreaks > 0"
                 class="row justify-content-center align-items-center mt-1 mb-3">
                <div class="col">
                    <div [countUp]='scoreboard.winner.tieBreaksWon'
                         [options]="{separator: ' '}"
                         class="header-small plus-column text-end">
                        0
                    </div>
                </div>
                <div class="col text-center">
                    <div>
                        {{'set.third' | translate}}
                    </div>
                    <div class="text-nowrap">
                        {{scoreboard.winner.tieBreaksRatio | number: "1.1-1"}}
                        %
                        {{scoreboard.looser.tieBreaksRatio | number: "1.1-1"}}
                    </div>
                </div>
                <div class="col">
                    <div [countUp]='scoreboard.looser.tieBreaksWon'
                         [options]="{separator: ' '}"
                         class="header-small plus-column text-start">
                        0
                    </div>
                </div>
            </div>
            <mat-divider></mat-divider>

            <!-- RALLIES -->
            <div class="row justify-content-center align-items-center my-3">
                <div class="col">
                    <div [countUp]='scoreboard.winner.pointsWon'
                         [options]="{separator: ' '}"
                         class="header-large plus-column text-start">
                        0
                    </div>
                </div>
                <div class="col text-center">
                    <div [countUp]='scoreboard.winner.pointsWon + scoreboard.looser.pointsWon'
                         [options]="{separator: ' ', prefix: '(', suffix: ')'}"
                         class="text-center">
                        0
                    </div>
                    <div class="header-small mb-1">
                        {{'rally.plural' | translate}}
                    </div>
                    <div class="text-nowrap">
                        {{scoreboard.winner.pointsRatio | number: "1.1-1"}}
                        %
                        {{scoreboard.looser.pointsRatio | number: "1.1-1"}}
                    </div>
                </div>
                <div class="col">
                    <div [countUp]='scoreboard.looser.pointsWon'
                         [options]="{separator: ' '}"
                         class="header-large plus-column text-end">
                        0
                    </div>
                </div>
            </div>
            <mat-divider></mat-divider>

        </div>

    </div>

    <!-- LIST OF MATCHES -->
    <div class="row justify-content-center">
        <div class="col-auto">
            <div class="header-small text-center mt-4 mb-2">
                {{'match.plural' | translate}}
            </div>
            <app-matches [matches]="scoreboard.matches">
            </app-matches>
        </div>
    </div>

</div>

<div *ngIf="scoreboard && scoreboard.matches.length == 0">
    <app-not-found-message message="{{'match.noPlayedYet' | translate}}">
    </app-not-found-message>
</div>

<div *ngIf="isLoading">
    <app-bouncing-balls-loader-sync>
    </app-bouncing-balls-loader-sync>
</div>
