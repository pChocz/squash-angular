<div *ngIf="seasonScoreboard">

    <app-page-header title="{{'season.singular' | translate}} {{ seasonScoreboard.season.seasonNumberRoman }}">
    </app-page-header>

    <app-league-logo [logo]="leagueLogoBytes">
    </app-league-logo>


    <div class="row justify-content-center">

        <div class="col-auto p-1 align-self-center">
            <button (click)="changeScoreboardView('FULL')"
                    [disabled]="selectedType === 'FULL'"
                    color="primary"
                    mat-icon-button>
                <mat-icon>open_in_full</mat-icon>
            </button>

            <button (click)="changeScoreboardView('MINIFIED')"
                    [disabled]="selectedType === 'MINIFIED'"
                    color="primary"
                    mat-icon-button>
                <mat-icon>close_fullscreen</mat-icon>
            </button>
        </div>

        <div class="col-auto p-1 align-self-center">
            <button [disabled]="seasonScoreboard.previousSeasonUuid === null"
                    [routerLink]="['/season', seasonScoreboard.previousSeasonUuid]"
                    color="primary"
                    mat-icon-button>
                <mat-icon>keyboard_arrow_left</mat-icon>
            </button>

            <button [queryParams]="{ expand: seasonScoreboard.season.leagueUuid }"
                    [routerLink]="['/leagues']"
                    color="primary"
                    mat-stroked-button>
                {{'league.singular' | translate}}
            </button>

            <button [disabled]="seasonScoreboard.nextSeasonUuid === null"
                    [routerLink]="['/season', seasonScoreboard.nextSeasonUuid]"
                    color="primary"
                    mat-icon-button>
                <mat-icon>keyboard_arrow_right</mat-icon>
            </button>
        </div>

        <div class="col-auto p-1 align-self-center">
            <button (click)="changeScoreboardView('BALANCE')"
                    [disabled]="selectedType === 'BALANCE'"
                    color="primary"
                    mat-icon-button>
                <mat-icon>groups</mat-icon>
            </button>

            <button [routerLink]="['/xp-points']"
                    [queryParams]="{type: seasonScoreboard.xpPointsType}"
                    color="primary"
                    mat-icon-button>
                <mat-icon>format_list_numbered</mat-icon>
            </button>
        </div>

    </div>


    <div class="row justify-content-center m-1">
        <div class="col-auto p-2 align-self-center">
            <div class="my-awesome-header-tiny">
                {{seasonScoreboard.season.seasonStartDate | date:'dd.MM.y'}}
            </div>
        </div>
        <div class="col-auto p-2 align-self-center">
            <div class="my-awesome-header-tiny">
                {{ seasonScoreboard.season.leagueName }}
            </div>
        </div>
    </div>


    <div class="row justify-content-center">
        <div class="col-auto py-1 px-3">
            <div class="mat-elevation-z3">
                <mat-button-toggle-group class="button-toggle-full"
                                         name="fontStyle">
                    <mat-button-toggle *ngFor="let round of seasonScoreboard.rounds"
                                       class="full-width"
                                       routerLink="/round/{{ round.roundUuid }}">
                        R{{ round.roundNumber }}
                    </mat-button-toggle>

                    <mat-button-toggle *ngIf="seasonScoreboard.rounds.length < 10"
                                       [queryParams]=" {
                                            seasonUuid: seasonScoreboard.season.seasonUuid,
                                            roundNumber: seasonScoreboard.rounds.length + 1
                                            }"
                                       [routerLink]="['/new-round']"
                                       class="custom-button">
                        + {{'round.singular' | translate}}
                    </mat-button-toggle>

                    <mat-button-toggle [queryParams]="{ seasonUuid: seasonScoreboard.season.seasonUuid }"
                                       [routerLink]="['/add-bonus-points']"
                                       class="custom-button">
                        {{'season.abbreviation.bonus' | translate}}
                    </mat-button-toggle>
                </mat-button-toggle-group>
            </div>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-auto py-1 px-3">
            <div *ngIf="seasonScoreboard.rounds.length > 0"
                 class="mat-elevation-z3 overflow-auto">
                <app-season-scoreboard-table *ngIf="selectedType !== 'BALANCE'"
                                             [hideRounds]="selectedType === 'MINIFIED'"
                                             [seasonScoreboard]="seasonScoreboard">
                </app-season-scoreboard-table>

                <app-season-balances-table *ngIf="selectedType === 'BALANCE'"
                                           [seasonScoreboard]="seasonScoreboard">
                </app-season-balances-table>
            </div>
        </div>
    </div>

    <div *ngIf="selectedType !== 'BALANCE'"
         class="row justify-content-center">
        <div class="col-auto py-1 px-3">
            <div class="overflow-auto no-wrap">
                {{'xpPoints.type' | translate}} - <i>{{seasonScoreboard.xpPointsType}}</i>
                <span class="separator">|</span>
                {{'season.abbreviation.total' | translate}} - {{'season.full.total' | translate}}
                <span class="separator">|</span>
                {{'season.abbreviation.attendices' | translate}} - {{'season.full.attendices' | translate}}
                <span class="separator">|</span>
                {{'season.abbreviation.average' | translate}} - {{'season.full.average' | translate}}
                <span class="separator">|</span>
                {{'season.abbreviation.bonus' | translate}} - {{'season.full.bonus' | translate}}
                <span class="separator">|</span>
                {{'season.abbreviation.pretenders' | translate}} - {{'season.full.pretenders' | translate}}
            </div>
        </div>
    </div>

</div>

<div *ngIf="isLoading">
    <app-bouncing-balls-loader-sync>
    </app-bouncing-balls-loader-sync>
</div>

<div *ngIf="noData" class="error-message">
    <app-not-found-message message="{{'round.notPlayedYet' | translate}}">
    </app-not-found-message>
</div>
