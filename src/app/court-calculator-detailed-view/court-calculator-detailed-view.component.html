<div class="row justify-content-center mx-1 my-2">
  <div class="col-12 text-center">
    <div class="header-small text-center my-2">
      {{'courtCalculator.rateCourtPerHour' | translate}}
    </div>
    <div class="with-icon-centered">
      <button (click)="decreaseRateForCourt()"
              color="primary" mat-icon-button>
        <mat-icon>
          remove
        </mat-icon>
      </button>
      <span class="slight-bold">
      {{courtPay.ratePerCourtPerHour}} zł
      </span>
      <button (click)="increaseRateForCourt()"
              color="primary" mat-icon-button>
        <mat-icon>
          add
        </mat-icon>
      </button>
    </div>
  </div>
  <div class="col-12 text-center my-1">
    <mat-slide-toggle
        (change)="calculate()"
        [(ngModel)]="courtPay.socialismMode">
      {{'courtCalculator.socialism' | translate}}
    </mat-slide-toggle>
  </div>
</div>

<div class="row">
  <div class="col py-1 px-3">
    <div class="mat-elevation-z3 overflow-auto">
      <table [dataSource]="dataSource"
             mat-table>

        <!-- Players -->
        <ng-container matColumnDef="player-column">
          <td *matCellDef="let player"
              class="text-center px-1"
              mat-cell>
            <div class="form-group m-1">
              <input [(ngModel)]="player.name"
                     class="form-control form-control-sm transparent-input width-extended">
            </div>
          </td>
        </ng-container>

        <!-- To pay -->
        <ng-container matColumnDef="to-pay-column">
          <td *matCellDef="let player"
              class="text-center text-nowrap left-border px-1"
              mat-cell>
            {{player.toPay | number:'1.2-2'}} zł
          </td>
        </ng-container>

        <!-- Hours 1,2,3 -->
        <ng-container matColumnDef="hour-1-column">
          <td *matCellDef="let player"
              class="text-center text-nowrap left-border p-1"
              mat-cell>
            <mat-checkbox (change)="calculate()" [(ngModel)]="player.presences[0].isPresent"
                          class="m-2">
            </mat-checkbox>
            <mat-checkbox (change)="calculate()" [(ngModel)]="player.presences[0].hasMultisport"
                          class="m-2"
                          color="accent">
            </mat-checkbox>
          </td>
        </ng-container>
        <ng-container matColumnDef="hour-2-column">
          <td *matCellDef="let player"
              class="text-center text-nowrap left-border p-1"
              mat-cell>
            <mat-checkbox (change)="calculate()" [(ngModel)]="player.presences[1].isPresent"
                          class="m-2">
            </mat-checkbox>
            <mat-checkbox (change)="calculate()" [(ngModel)]="player.presences[1].hasMultisport"
                          class="m-2"
                          color="accent">
            </mat-checkbox>
          </td>
        </ng-container>
        <ng-container matColumnDef="hour-3-column">
          <td *matCellDef="let player"
              class="text-center text-nowrap left-border p-1"
              mat-cell>
            <mat-checkbox (change)="calculate()" [(ngModel)]="player.presences[2].isPresent"
                          class="m-2"
                          color="primary">
            </mat-checkbox>
            <mat-checkbox (change)="calculate()" [(ngModel)]="player.presences[2].hasMultisport"
                          class="m-2"
                          color="accent">
            </mat-checkbox>
          </td>
        </ng-container>

        <!-- Delete -->
        <ng-container matColumnDef="delete-column">
          <td *matCellDef="let player"
              class="text-center p-0 left-border"
              mat-cell>
            <button (click)="deletePlayer(player)"
                    color="warn"
                    mat-icon-button>
              <mat-icon>
                delete
              </mat-icon>
            </button>
          </td>
        </ng-container>

        <!--            "toPay": "Do zapłaty",
            "playerName": "Imię",
            "addPlayer": "Dodaj gracza",
            "multisport": {
              "no": "Bez multisporta",
              "minus": "Multisport −",
              "plus": "Multisport +"
            },
            "courts": "Korty",
            "groups": "Grupy",
            "socialism": "Socjalizm",
            "hour": {
              "first": "1. godzina",
              "second": "2. godzina",
              "third": "3. godzina"
            }-->


        <!-- Headers -->
        <ng-container matColumnDef="header-row-player">
          <th *matHeaderCellDef
              class="text-center px-1 bottom-border"
              mat-header-cell>
            {{'courtCalculator.playerName' | translate}}
          </th>
        </ng-container>

        <ng-container matColumnDef="header-row-to-pay">
          <th *matHeaderCellDef
              class="text-center text-nowrap left-border px-1 bottom-border"
              mat-header-cell>
            {{'courtCalculator.toPay' | translate}}
          </th>
        </ng-container>

        <ng-container matColumnDef="header-row-hour-1">
          <th *matHeaderCellDef
              class="text-center left-border px-1 bottom-border"
              mat-header-cell>
            {{'courtCalculator.hour.first' | translate}}
          </th>
        </ng-container>

        <ng-container matColumnDef="header-row-hour-2">
          <th *matHeaderCellDef
              class="text-center left-border px-1 bottom-border"
              mat-header-cell>
            {{'courtCalculator.hour.second' | translate}}
          </th>
        </ng-container>

        <ng-container matColumnDef="header-row-hour-3">
          <th *matHeaderCellDef
              class="text-center left-border px-1 bottom-border"
              mat-header-cell>
            {{'courtCalculator.hour.third' | translate}}
          </th>
        </ng-container>

        <ng-container matColumnDef="header-row-empty">
          <th *matHeaderCellDef
              class="text-center left-border px-0 bottom-border"
              mat-header-cell>

          </th>
        </ng-container>


        <!-- Footers -->
        <ng-container matColumnDef="footer-row-add-player">
          <th *matFooterCellDef [colSpan]="1"
              class="text-center px-1 bottom-border"
              mat-footer-cell>
            <button (click)="addPlayer()"
                    class="mx-1"
                    color="primary"
                    mat-stroked-button>
              {{'courtCalculator.addPlayer' | translate}}
            </button>
            <button (click)="save()"
                    class="mx-1"
                    color="accent"
                    mat-stroked-button>
              {{'save' | translate}}
            </button>
          </th>
        </ng-container>

        <ng-container matColumnDef="footer-row-courts">
          <th *matFooterCellDef
              class="text-center px-1 bottom-border"
              mat-footer-cell>
            {{'courtCalculator.courts' | translate}}:
          </th>
        </ng-container>

        <ng-container matColumnDef="footer-row-hour-1">
          <th *matFooterCellDef
              class="text-center text-nowrap left-border px-1 bottom-border"
              mat-footer-cell>

            <button (click)="decreaseCourtsForHour(0)"
                    color="primary" mat-icon-button>
              <mat-icon>
                remove
              </mat-icon>
            </button>

            {{courtPay.courtsPerHour[0]}}

            <button (click)="increaseCourtsForHour(0)"
                    color="primary" mat-icon-button>
              <mat-icon>
                add
              </mat-icon>
            </button>

          </th>
        </ng-container>

        <ng-container matColumnDef="footer-row-hour-2">
          <th *matFooterCellDef
              class="text-center text-nowrap left-border px-1 bottom-border"
              mat-footer-cell>
            <button (click)="decreaseCourtsForHour(1)"
                    color="primary" mat-icon-button>
              <mat-icon>
                remove
              </mat-icon>
            </button>

            {{courtPay.courtsPerHour[1]}}

            <button (click)="increaseCourtsForHour(0)"
                    color="primary" mat-icon-button>
              <mat-icon>
                add
              </mat-icon>
            </button>
          </th>
        </ng-container>

        <ng-container matColumnDef="footer-row-hour-3">
          <th *matFooterCellDef
              class="text-center text-nowrap left-border px-1 bottom-border"
              mat-footer-cell>
            <button (click)="decreaseCourtsForHour(2)"
                    color="primary" mat-icon-button>
              <mat-icon>
                remove
              </mat-icon>
            </button>

            {{courtPay.courtsPerHour[2]}}

            <button (click)="increaseCourtsForHour(0)"
                    color="primary" mat-icon-button>
              <mat-icon>
                add
              </mat-icon>
            </button>
          </th>
        </ng-container>

        <ng-container matColumnDef="footer-row-empty">
          <th *matFooterCellDef
              class="text-center text-nowrap left-border px-0 bottom-border"
              mat-footer-cell>

          </th>
        </ng-container>


        <tr *matHeaderRowDef="[
            'header-row-player',
            'header-row-to-pay',
            'header-row-hour-1',
            'header-row-hour-2',
            'header-row-hour-3',
            'header-row-empty'
            ]"
            mat-header-row>
        </tr>

        <tr *matRowDef="let row; columns: displayedColumns;"
            mat-row>
        </tr>

        <tr *matFooterRowDef="[
            'footer-row-add-player',
            'footer-row-courts',
            'footer-row-hour-1',
            'footer-row-hour-2',
            'footer-row-hour-3',
            'footer-row-empty'
            ]"
            mat-footer-row>
        </tr>
      </table>
    </div>
  </div>
</div>

<!--    "multisportReduction": "Multisport reduction",
    "toPayWithCash": "Cash to pay",
    "fixedRate": "Reference rate",-->

<div class="row justify-content-center mx-1 my-2">
  <div class="col-auto text-center">
    <div class="material-frame p-2 m-1 header-tiny">
      <table>
        <tr>
          <td class="text-start p-2">
            {{'courtCalculator.fixedRate' | translate}}
          </td>
          <td *ngIf="true" class="text-end p-2 plus-column">
            {{courtPay.totalPay | number:'1.0'}} zł
          </td>
        </tr>
        <tr>
          <td class="text-start p-2">
            {{'courtCalculator.multisportReduction' | translate}}
          </td>
          <td *ngIf="2 > 0" class="text-end p-2 plus-column">
            {{courtPay.multisportDeduct | number:'1.0'}} zł
          </td>
        </tr>
        <tr>
          <td class="text-start p-2">
            {{'courtCalculator.toPayWithCash' | translate}}
          </td>
          <td *ngIf="2 > 0" class="text-end p-2 plus-column">
            {{courtPay.totalPayMultisportDeducted | number:'1.0'}} zł
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
