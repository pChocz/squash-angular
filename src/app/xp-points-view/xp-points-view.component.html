<div *ngIf="xpPointsPerRound">

<app-page-header title="{{'xpPoints.title' | translate}}">
</app-page-header>

    <div class="row justify-content-center">
        <div class="col-auto">

            <mat-form-field appearance="outline" class="m-2">
                <mat-label>
                    {{'xpPoints.availableTypes' | translate}}
                </mat-label>
                <mat-select (selectionChange)="doFilter()"
                            [(value)]="selectedType">
                    <mat-option
                            *ngFor="let type of types"
                            [value]="type">
                        {{type}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-auto">
            <div class="mat-elevation-z3 overflow-auto m-1 mb-2">

                <table [dataSource]="dataSource" mat-table>

                    <!-- Split Column -->
                    <ng-container matColumnDef="split" sticky>
                        <th *matHeaderCellDef
                            class="fixed-width-75 center-aligned first-cell-in-row"
                            mat-header-cell>
                            {{'xpPoints.split' | translate}}
                        </th>
                        <td *matCellDef="let element"
                            class="fixed-width-75 center-aligned first-cell-in-row"
                            mat-cell>
                            {{element.split}} </td>
                    </ng-container>



                    <!-- Type Column -->
                    <ng-container matColumnDef="type" sticky>
                        <th *matHeaderCellDef
                            class="center-aligned d-none"
                            mat-header-cell>
                            TYPE
                        </th>
                        <td *matCellDef="let element"
                            class="center-aligned d-none"
                            mat-cell>
                            {{element.type}} </td>
                    </ng-container>





                    <!-- Number Of Players Column -->
                    <ng-container matColumnDef="numberOfPlayers">
                        <th *matHeaderCellDef
                            class="fixed-width-50 center-aligned"
                            mat-header-cell>
                            {{'player.pluralCount' | translate}}
                        </th>
                        <td *matCellDef="let element" class="fixed-width-50 center-aligned"
                            mat-cell>
                            {{element.numberOfPlayers}}
                        </td>
                    </ng-container>

                    <!-- Per place -->
                    <ng-container *ngFor="let column of displayedNumericPerPlaceColumns; let i = index"
                                  [matColumnDef]="column">
                        <th *matHeaderCellDef [class.last-cell-in-row]="i === displayedNumericPerPlaceColumns.length-1"
                            class="even-distributed center-aligned"
                            mat-header-cell> {{column}} </th>
                        <td *matCellDef="let element"
                            [class.group-1st-background]="element.xpPoints[i]?.groupNumber === 1"
                            [class.group-2nd-background]="element.xpPoints[i]?.groupNumber === 2"
                            [class.group-3rd-background]="element.xpPoints[i]?.groupNumber === 3"
                            [class.last-cell-in-row]="i === displayedNumericPerPlaceColumns.length-1"
                            class="even-distributed right-aligned"
                            mat-cell>
                            <table class="w-100">
                                <td class="half-distributed right-aligned-no-padding">
                                    {{element.xpPoints[i]?.points}}
                                </td>
                                <td class="half-distributed small-grey left-aligned-small-padding">
                                    {{element.xpPoints[i]?.placeInGroup}}
                                </td>
                            </table>
                        </td>
                    </ng-container>

                    <tr *matHeaderRowDef="displayedAllColumns" mat-header-row></tr>
                    <tr *matRowDef="let row; columns: displayedAllColumns;" mat-row></tr>
                </table>

            </div>
        </div>
    </div>
</div>

<div *ngIf="isLoading">
    <app-bouncing-balls-loader-sync>
    </app-bouncing-balls-loader-sync>
</div>
