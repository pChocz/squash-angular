<div *ngIf="roundScoreboard; else loading" class="d-print-none">

  <div class="row justify-content-center mx-1 my-2">
    <div class="col-auto">
      <div class="row material-frame-no-margin px-1">
        <div class="col p-0 align-self-center text-nowrap overflow-auto">
          <button [routerLink]="['/leagues']"
                  class="m-0 px-1 py-0 d-none d-md-inline"
                  color="primary"
                  mat-button>
            {{'league.all' | translate}}
          </button>
          <mat-icon class="align-middle d-none d-md-inline">
            chevron_right
          </mat-icon>
          <button [routerLink]="['/league', roundScoreboard.leagueUuid]"
                  class="m-0 px-1 py-0"
                  color="primary"
                  mat-button>
            <!-- visible only on small screens - truncate to 100px -->
            <span class="d-md-none d-inline-block text-truncate"
                  style="max-width: 100px;">
                {{roundScoreboard.leagueName}}
              </span>
            <!-- visible on >= medium - show full name -->
            <span class="d-none d-md-block">
                {{roundScoreboard.leagueName}}
              </span>
          </button>
          <mat-icon class="align-middle">
            chevron_right
          </mat-icon>
          <button [routerLink]="['/season', roundScoreboard.seasonUuid]"
                  class="m-0 px-1 py-0"
                  color="primary"
                  mat-button>
            <span>
                {{'season.singular' | translate}} {{roundScoreboard.seasonNumberRoman}}
            </span>
          </button>
          <mat-icon class="align-middle">
            chevron_right
          </mat-icon>
          <span class="align-middle">
              {{roundScoreboard.roundDate}}
            </span>
        </div>
        <div class="col-auto p-0 ps-1">
          <button [matMenuTriggerFor]="menu"
                  class="m-0"
                  color="primary"
                  mat-icon-button>
            <mat-icon>touch_app</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row justify-content-center g-0">
    <div class="col-auto align-self-center">
      <button [disabled]="this.previousRoundUuid === null"
              [routerLink]="['/round', this.previousRoundUuid]"
              color="primary"
              class="large-icon-button"
              mat-icon-button>
        <mat-icon>arrow_back_ios_new</mat-icon>
      </button>
    </div>
    <div class="col-auto align-self-center">
      <app-page-header title="{{'round.singular' | translate}} {{ roundScoreboard.roundNumber }}">
      </app-page-header>
    </div>
    <div class="col-auto align-self-center">
      <button [disabled]="this.nextRoundUuid === null"
              [routerLink]="['/round', this.nextRoundUuid]"
              color="primary"
              class="large-icon-button"
              mat-icon-button>
        <mat-icon>arrow_forward_ios</mat-icon>
      </button>
    </div>
  </div>

  <app-league-logo [logo]="leagueLogoBytes">
  </app-league-logo>

  <div class="row justify-content-center">
    <div class="col align-self-center">
      <mat-tab-group (selectedTabChange)="switchTab($event.index)"
                     [selectedIndex]="tab"
                     mat-stretch-tabs>
        <mat-tab label="{{'scoreboard.plural' | translate}}">
          <div class="row justify-content-center">
            <div class="col-auto">
              <div *ngFor="let roundGroupScoreboardElement of roundScoreboard.roundGroupScoreboards"
                   class="row justify-content-center">
                <div class="col">
                  <app-round-group-scoreboard [roundGroupScoreboard]="roundGroupScoreboardElement">
                  </app-round-group-scoreboard>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab *ngFor="let roundGroupScoreboardElement of roundScoreboard?.roundGroupScoreboards">
          <ng-template mat-tab-label>
            <span>
              {{'group.singular' | translate}} {{roundGroupScoreboardElement.roundGroupNumber | roundGroupNumberToLetter}}
            </span>
            <span>
              {{'player.count' | translate: {count: roundGroupScoreboardElement.getNumberOfPlayers()} }}
            </span>
          </ng-template>

          <div class="row justify-content-center">
            <div class="col-auto">
              <div class="row justify-content-center">
                <div class="col">
                  <app-round-group-scoreboard [roundGroupScoreboard]="roundGroupScoreboardElement">
                  </app-round-group-scoreboard>
                </div>
              </div>
              <div class="row justify-content-center">
                <div class="col">
                  <app-round-group-matches [matches]="roundGroupScoreboardElement.matches">
                  </app-round-group-matches>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>


  <!-- MENU -->
  <mat-menu #menu="matMenu">
    <button (click)="printRound()"
            mat-menu-item>
      <mat-icon>print</mat-icon>
      <span>{{'round.printEmptyMatchesTooltip' | translate}}</span>
    </button>
    <mat-divider></mat-divider>
    <button [queryParams]="{ seasonUuid: roundScoreboard.seasonUuid }"
            [routerLink]="['/add-bonus-points']"
            mat-menu-item>
      <mat-icon>plus_one</mat-icon>
      <span>{{'bonusPoints.title' | translate}}</span>
    </button>
    <button [routerLink]="['/league', roundScoreboard.leagueUuid]"
            mat-menu-item>
      <mat-icon>leaderboard</mat-icon>
      <span>{{'league.singular' | translate}}</span>
    </button>
    <button
        [routerLink]="['/league-additional-matches', roundScoreboard.leagueUuid]"
        mat-menu-item>
      <mat-icon>self_improvement</mat-icon>
      <span>{{'league.additionalMatches' | translate}}</span>
    </button>
    <mat-divider></mat-divider>
    <button [routerLink]="['/round-edit', roundScoreboard.roundUuid]"
            mat-menu-item>
      <mat-icon>edit</mat-icon>
      <span>{{'round.editTooltip' | translate}}</span>
    </button>
  </mat-menu>

</div>

<app-round-matches-printable-view [roundScoreboard]="roundScoreboard">
</app-round-matches-printable-view>

<ng-template #loading>
  <app-bouncing-balls-loader-sync>
  </app-bouncing-balls-loader-sync>
</ng-template>
